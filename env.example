# This file is part of Blackbook.
#
# Blackbook is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# Blackbook is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with Blackbook.  If not, see <https://www.gnu.org/licenses/>.

#
# Author: Taco Scheltema <github@scheltema.me>
#

#
# --- Core Application Settings ---
# Generate a long, random string for this (e.g., `openssl rand -hex 32`)
SECRET_KEY=your-super-secret-key
FLASK_DEBUG=True
# Set to True to disable all add/edit/delete functionality for all users
READONLY=False
# The title to display in the navigation bar
APP_TITLE=LDAP Address Book

# --- Database ---
# For SQLite, the default is fine. For PostgreSQL, use a URL like:
# DATABASE_URL=postgresql://user:password@host/dbname
DATABASE_URL=sqlite:///app.db

# --- LDAP Server Connection ---
# Use ldaps:// and port 636 for secure connections
LDAP_SERVER=ldap://127.0.0.1:389
LDAP_BASE_DN=dc=example,dc=com
# The user for binding must have at least read access to the directory.
# Write access is required to use the add/edit/delete features.
LDAP_BIND_DN=cn=admin,dc=example,dc=com
LDAP_BIND_PASSWORD=admin
# Set to True if your LDAP server uses SSL/TLS on port 636
LDAP_USE_SSL=False

# --- LDAP Schema and Search Configuration ---
# Optional: If your contacts are in a specific OU, define it here.
# If commented out, it will search from the LDAP_BASE_DN.
# ADDRESSBOOK_FILTER=ou=contacts,dc=example,dc=com

# DN template for creating new CONTACTS (not users). Use {uid} or {cn}.
LDAP_CONTACT_DN_TEMPLATE="cn={cn},ou=contacts,dc=example,dc=com"

# DN template for creating login USERS. Must use {username}.
LDAP_USER_DN_TEMPLATE="uid={username},ou=users,dc=example,dc=com"

# Comma-separated list of objectClasses for a PERSON contact.
# For OpenLDAP, 'inetOrgPerson' is common. For Active Directory, it might be 'user'.
# A more complete OpenLDAP example: top,person,organizationalPerson,inetOrgPerson
LDAP_PERSON_OBJECT_CLASS=inetOrgPerson
# The attribute on a person entry that links to their company name.
LDAP_COMPANY_LINK_ATTRIBUTE=o

# --- Attribute Display Configuration ---
# Comma-separated list of `ldap_attribute:Human Readable Name`.
# This controls which fields appear in the UI and in what order.
LDAP_ATTRIBUTE_MAP=cn:Full Name,sn:Surname,givenName:Given Name,mail:Email,telephoneNumber:Phone,o:Company,title:Title,street:Street,l:City,postalCode:Postal Code,c:Country,manager:Manager,jpegPhoto:Photo

# --- Authentication Method Toggles ---
ENABLE_LOCAL_LOGIN=True
ENABLE_LDAP_LOGIN=True

# --- SSO Provider Admin/Editor Groups ---
# The exact DN of the LDAP group for admins
LDAP_ADMIN_GROUP_DN=cn=admins,ou=groups,dc=example,dc=com
LDAP_EDITOR_GROUP_DN=cn=editors,ou=groups,dc=example,dc=com

# The exact group name from the SSO provider
GOOGLE_ADMIN_GROUP=
GOOGLE_EDITOR_GROUP=
KEYCLOAK_ADMIN_GROUP=
KEYCLOAK_EDITOR_GROUP=
AUTHENTIK_ADMIN_GROUP=
AUTHENTIK_EDITOR_GROUP=

# --- Caching ---
# How long the cache entry is valid, in seconds. Also a safety fallback.
CACHE_DEFAULT_TIMEOUT=300
# How often the background job refreshes the cache, in seconds.
CACHE_REFRESH_INTERVAL=300

# --- Avatar Generation ---
# Set to True to enable randomly generated avatars for contacts without a photo.
ENABLE_GENERATED_AVATARS=False
# Theme for generated avatars. Can be: vehicles, plants, animals, all
AVATAR_THEME=all

# --- Pagination ---
# Comma-separated list of options for the "results per page" dropdown.
PAGE_SIZE_OPTIONS=20,30,50

# --- Mail Server (for password resets) ---
# Example for a local SMTP server or a service like SendGrid
MAIL_SERVER=smtp.example.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-username
MAIL_PASSWORD=your-password
# The "From" address for password reset emails
MAIL_FROM_ADDRESS=noreply@example.com
# How long the password reset link is valid for, in hours
PASSWORD_RESET_EXPIRATION_HOURS=24

# --- Google OAuth Configuration ---
# GOOGLE_CLIENT_ID=
# GOOGLE_CLIENT_SECRET=

# --- Keycloak OIDC Configuration ---
# KEYCLOAK_CLIENT_ID=
# KEYCLOAK_CLIENT_SECRET=
# KEYCLOAK_SERVER_URL=https://your-keycloak-server.com/realms/your-realm

# --- Authentik OIDC Configuration ---
# AUTHENTIK_CLIENT_ID=
# AUTHENTIK_CLIENT_SECRET=
# AUTHENTIK_SERVER_URL=https://your-authentik-server.com/application/o/your-app-slug/
